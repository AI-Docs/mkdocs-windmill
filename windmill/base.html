<!DOCTYPE html>
<html lang="en">
<head>
  {% set is_top = (page and page.is_homepage) and not force_plain_page %}
  {% set base_url = base_url or "./" %}

  {%- block site_meta %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% if page and page.is_homepage %}<meta name="description" content="{{ config.site_description }}">{% endif %}
    {% if config.site_author %}<meta name="author" content="{{ config.site_author }}">{% endif %}
    {% if page and page.canonical_url %}<link rel="canonical" href="{{ page.canonical_url }}">{% endif %}
    {% if config.site_favicon %}<link rel="shortcut icon" href="{{ base_url }}/{{ config.site_favicon }}">
    {% else %}<link rel="shortcut icon" href="{{ base_url }}/img/favicon.ico">{% endif %}
  {%- endblock %}

  {%- block htmltitle %}
    <title>{{ config.site_name }}</title>
  {%- endblock %}

  {%- block styles %}
    <link href="{{ base_url }}/css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="{{ base_url }}/css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="{{ base_url }}/css/base.css" rel="stylesheet">
    {% if not is_top %}
      <link rel="stylesheet" href="{{ base_url }}/css/highlight.css">
    {% endif %}
    {%- for path in extra_css %}
    <link href="{{ path }}" rel="stylesheet">
    {%- endfor %}
  {%- endblock %}

  {%- block libs %}
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="{{ base_url }}/js/jquery-3.2.1.min.js"></script>
    <script src="{{ base_url }}/js/bootstrap-3.3.7.min.js"></script>
    {% if is_top %}
      <script src="{{ base_url }}/js/elasticlunr.min.js"></script>
    {% else %}
      <script src="{{ base_url }}/js/highlight.pack.js"></script>
    {% endif %}
  {%- endblock %}

  {%- block scripts %}
    <script>
      var base_url = '{{ base_url }}';
      var is_top = {{ 'true' if is_top else 'false' }};
    </script>
    <script src="{{ base_url }}/js/base.js"></script>
    {%- for path in extra_javascript %}
      <script src="{{ path }}"></script>
    {%- endfor %}
  {%- endblock %}

  {%- block analytics %}
    {%- if config.google_analytics %}
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', '{{ config.google_analytics[0] }}', '{{ config.google_analytics[1] }}');
        ga('send', 'pageview');
    </script>
    {%- endif %}
  {%- endblock %}

  {%- block extrahead %} {% endblock %}

  {%- if is_top %}
    <base target="_parent">
  {%- endif %}

</head>

<body class="{{ 'wm-top-page' if is_top else 'wm-content' }}">

{%- if is_top -%}
  {#
  Code for the top frame. It should ideally be separate from the index page (which is likely
  possible once theme_config is released with mkdocs 1.0). For now, they are generated as a single
  file, with index page's content saved into and written to the iframe from a JS string.
  #}

  {% include 'topbar.html' %}

  <div id="main-content">
    {% include 'nav-pane.html' %}
    <div class="wm-content-pane">
      <iframe class="wm-article" name="article"></iframe>
    </div>
  </div>

  {# Contents of the iframe part of the homepage, as an escaped JS string. #}
  <script>var homepage_contents = '
    {%- filter replace("'", "\\'")|replace("\n", "\\n")|replace("/script", "/' + 'script") %}
    {%- with %}
    {%- set force_plain_page = true %}
    {%- include "base.html" %}
    {%- endwith %}
    {%- endfilter %}';
  </script>

{%- else -%}
  {# Code for the main template for all content pages. #}

  <div class="container-fluid">
    {%- if config.extra.article_nav_top != False %}
      {% include "article-nav.html" %}
    {%- endif %}

    {%- block content %}
      {% if page and page.meta.source %}
        <div class="source-links">
        {% for filename in page.meta.source %}
            <span class="label label-primary">{{ filename }}</span>
        {% endfor %}
        </div>
      {% endif %}

      {{ page.content }}
    {%- endblock %}

    <br>
    {%- if config.extra.article_nav_bottom != False %}
      {% include "article-nav.html" %}
      <br>
    {%- endif %}
  </div>

  <footer class="col-md-12">
  {%- block footer %}
    {%- if config.copyright %}<p>{{ config.copyright }}</p>{%- endif %}
    <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
  {%- endblock %}
  </footer>

{%- endif -%}

</body>
</html>
{%- if is_top %}
<!--
MkDocs version : {{ mkdocs_version }}
Build Date UTC : {{ build_date_utc }}
-->
{%- endif %}
